# AI Counseling Assistant Dashboard - 정보 구조 설계서 (IA Document)

---

## 목차

1. [사이트 맵 (Site Map)](#1-사이트-맵-site-map)
2. [사용자 플로우 (User Flow)](#2-사용자-플로우-user-flow)
3. [네비게이션 구조 (Navigation Structure)](#3-네비게이션-구조-navigation-structure)
4. [페이지 계층 구조 (Page Hierarchy)](#4-페이지-계층-구조-page-hierarchy)
5. [콘텐츠 조직화 (Content Organization)](#5-콘텐츠-조직화-content-organization)
6. [인터랙션 패턴 (Interaction Patterns)](#6-인터랙션-패턴-interaction-patterns)
7. [URL 구조 (URL Structure)](#7-url-구조-url-structure)
8. [컴포넌트 계층 구조 (Component Hierarchy)](#8-컴포넌트-계층-구조-component-hierarchy)

---

## 1. 사이트 맵 (Site Map)

### 1.1 전체 구조 개요

본 대시보드는 **단일 워크스페이스 중심 설계**를 채택하며, 통화 중 페이지 전환을 최소화합니다.

```
┌─────────────────────────────────────────────────────────────────────┐
│                    AI Counseling Assistant Dashboard                 │
├─────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  ┌──────────────┐     ┌──────────────────────────────────────────┐  │
│  │              │     │                                          │  │
│  │   로그인      │────▶│            메인 대시보드                  │  │
│  │   /login     │     │            /dashboard                    │  │
│  │              │     │                                          │  │
│  └──────────────┘     │  ┌────────────────────────────────────┐  │  │
│                       │  │  Zone A: 실시간 대화 스트림          │  │  │
│                       │  │  Zone B: AI 인텔리전스 패널          │  │  │
│                       │  │  Zone C: 마무리 모달 (오버레이)       │  │  │
│                       │  └────────────────────────────────────┘  │  │
│                       │                                          │  │
│                       └──────────────────────────────────────────┘  │
│                                        │                            │
│                       ┌────────────────┼────────────────┐          │
│                       ▼                ▼                ▼          │
│               ┌──────────────┐ ┌──────────────┐ ┌──────────────┐   │
│               │   설정       │ │  통화 이력    │ │  도움말      │   │
│               │  /settings   │ │  /history    │ │  /help       │   │
│               │  (모달)      │ │  (별도 페이지) │ │  (모달)      │   │
│               └──────────────┘ └──────────────┘ └──────────────┘   │
│                                                                      │
└─────────────────────────────────────────────────────────────────────┘
```

### 1.2 상세 사이트 맵

| Depth 1 | Depth 2 | Depth 3 | 유형 | 설명 |
|---------|---------|---------|------|------|
| **로그인** | - | - | Page | 인증 진입점 |
| **메인 대시보드** | - | - | Page | 핵심 워크스페이스 |
| | Zone A (대화 스트림) | - | Panel | 실시간 STT 표시 영역 |
| | Zone B (AI 패널) | 현재 분석 탭 | Tab | AI 분석 결과 표시 |
| | | 히스토리 탭 | Tab | 세션 내 분석 이력 |
| | Zone C (마무리) | 요약 섹션 | Modal Section | 통화 요약 편집 |
| | | SMS 섹션 | Modal Section | 발송 메시지 편집 |
| **설정** | 개인 설정 | - | Modal | 사용자 환경 설정 |
| | 알림 설정 | - | Modal | 알림 옵션 |
| | 단축키 설정 | - | Modal | 키보드 단축키 |
| **통화 이력** | 이력 목록 | - | Page | 과거 통화 검색/조회 |
| | 이력 상세 | - | Page | 개별 통화 상세 보기 |
| **도움말** | 사용 가이드 | - | Modal/Panel | 기능 안내 |
| | FAQ | - | Modal/Panel | 자주 묻는 질문 |
| | 문의하기 | - | Modal | 지원 요청 |

### 1.3 페이지 유형 분류

| 유형 | 특성 | 해당 화면 |
|------|------|----------|
| **Primary Page** | URL 변경, 전체 레이아웃 교체 | 로그인, 메인 대시보드, 통화 이력 |
| **Modal Overlay** | URL 유지, 배경 대시보드 보존 | 설정, 도움말, Zone C 마무리 |
| **Panel State** | URL 유지, 패널 내 상태 변경 | Zone B 탭 전환, 패널 확장/축소 |

---

## 2. 사용자 플로우 (User Flow)

### 2.1 핵심 플로우: 통화 처리 전체 과정

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           통화 처리 전체 플로우                               │
└─────────────────────────────────────────────────────────────────────────────┘

    ┌─────────┐      ┌─────────┐      ┌──────────────────────────────────┐
    │         │      │         │      │                                  │
    │  로그인  │─────▶│  대기   │─────▶│         통화 진행 중              │
    │         │      │  상태   │      │                                  │
    └─────────┘      └─────────┘      │  ┌────────────────────────────┐  │
                          │           │  │ [실시간 전사 확인]          │  │
                          │           │  │         │                  │  │
                     전화 연결        │  │         ▼                  │  │
                                      │  │ [정보 필요?]               │  │
                                      │  │    │        │             │  │
                                      │  │   Yes      No             │  │
                                      │  │    │        │             │  │
                                      │  │    ▼        │             │  │
                                      │  │ [AI 분석    │             │  │
                                      │  │  트리거]    │             │  │
                                      │  │    │        │             │  │
                                      │  │    ▼        │             │  │
                                      │  │ [결과 확인] │             │  │
                                      │  │    │        │             │  │
                                      │  │    ▼        ▼             │  │
                                      │  │ [응대 계속]◀──────────────│  │
                                      │  └────────────────────────────┘  │
                                      │                │                 │
                                      └────────────────│─────────────────┘
                                                       │
                                                  통화 종료
                                                       │
                                                       ▼
                                      ┌──────────────────────────────────┐
                                      │         통화 마무리               │
                                      │  ┌────────────────────────────┐  │
                                      │  │ [요약 확인/편집]            │  │
                                      │  │         │                  │  │
                                      │  │         ▼                  │  │
                                      │  │ [SMS 확인/편집]            │  │
                                      │  │         │                  │  │
                                      │  │         ▼                  │  │
                                      │  │ [발송 또는 저장만]          │  │
                                      │  └────────────────────────────┘  │
                                      └────────────────│─────────────────┘
                                                       │
                                                       ▼
                                                 ┌─────────┐
                                                 │  대기   │
                                                 │  상태   │
                                                 └─────────┘
```

### 2.2 상세 플로우: AI 분석 요청

```
┌─────────────────────────────────────────────────────────────────────┐
│                      AI 분석 요청 플로우                              │
└─────────────────────────────────────────────────────────────────────┘

     사용자 액션                    시스템 응답                  UI 상태
    ──────────────────────────────────────────────────────────────────
         │                              │                         │
         │  [AI 분석 버튼 클릭]          │                         │
         │  또는 Ctrl+Shift+A           │                         │
         │─────────────────────────────▶│                         │
         │                              │                         │
         │                              │  컨텍스트 추출           │
         │                              │  (최근 3-5분/10턴)       │
         │                              │         │               │
         │                              │         ▼               │
         │                              │  PII 마스킹              │
         │                              │         │               │
         │                              │         ▼               │
         │                              │  RAG 서버 요청           │
         │                              │─────────────────────────▶ Skeleton UI
         │                              │                         │ 표시
         │                              │         │               │
         │                              │    (1-3초 대기)          │
         │                              │         │               │
         │                              │         ▼               │
         │                              │  응답 수신               │
         │                              │─────────────────────────▶ 결과 표시
         │                              │                         │
         │  [결과 확인]                  │                         │
         │◀─────────────────────────────│                         │
         │                              │                         │
         │  [쿼리 수정] (선택)           │                         │
         │─────────────────────────────▶│                         │
         │                              │  재분석 수행             │
         │                              │─────────────────────────▶ Skeleton UI
         │                              │                         │
         │  [스크립트 복사] (선택)       │                         │
         │─────────────────────────────▶│                         │
         │                              │  클립보드 복사           │
         │                              │─────────────────────────▶ Toast 표시
         │                              │                         │
```

### 2.3 상세 플로우: 통화 마무리

```
┌─────────────────────────────────────────────────────────────────────┐
│                       통화 마무리 플로우                              │
└─────────────────────────────────────────────────────────────────────┘

    ┌─────────────┐
    │ 통화 종료    │
    │ 트리거      │
    └──────┬──────┘
           │
           ├─────────────────────┬─────────────────────┐
           │                     │                     │
           ▼                     ▼                     ▼
    ┌─────────────┐      ┌─────────────┐      ┌─────────────┐
    │ 상담사가     │      │ 고객이       │      │ 시스템      │
    │ 종료 클릭    │      │ 먼저 끊음    │      │ 타임아웃    │
    └──────┬──────┘      └──────┬──────┘      └──────┬──────┘
           │                     │                     │
           └──────────────┬──────┴─────────────────────┘
                          │
                          ▼
              ┌───────────────────────┐
              │  Zone C 모달 표시      │
              │  + 요약 생성 시작      │
              └───────────┬───────────┘
                          │
           ┌──────────────┴──────────────┐
           │                             │
           ▼                             ▼
    ┌─────────────────┐         ┌─────────────────┐
    │ 요약 생성 성공   │         │ 요약 생성 실패   │
    └────────┬────────┘         └────────┬────────┘
             │                           │
             ▼                           ▼
    ┌─────────────────┐         ┌─────────────────┐
    │ 요약 표시        │         │ 에러 메시지     │
    │ (PII 마스킹)     │         │ + 재시도 옵션   │
    └────────┬────────┘         └────────┬────────┘
             │                           │
             ▼                           │
    ┌─────────────────┐                  │
    │ 상담사 편집?     │                  │
    │  Yes / No       │◀─────────────────┘
    └────────┬────────┘
             │
             ├─── Yes ───▶ [편집 모드 활성화] ───┐
             │                                   │
             └─── No ────────────────────────────┤
                                                 │
                                                 ▼
                                   ┌─────────────────────┐
                                   │ SMS 발송 여부?       │
                                   │  발송 / 저장만 / 취소│
                                   └──────────┬──────────┘
                                              │
              ┌───────────────────────────────┼───────────────────┐
              │                               │                   │
              ▼                               ▼                   ▼
       ┌─────────────┐              ┌─────────────┐      ┌─────────────┐
       │ SMS 발송     │              │ 저장만       │      │ 취소        │
       │ + 로그 저장  │              │ (로그 저장)  │      │ (확인 필요) │
       └──────┬──────┘              └──────┬──────┘      └──────┬──────┘
              │                            │                    │
              └────────────────────────────┴────────────────────┘
                                           │
                                           ▼
                                    ┌─────────────┐
                                    │ 모달 닫기    │
                                    │ 대기 상태    │
                                    │ 복귀        │
                                    └─────────────┘
```

### 2.4 예외 플로우

| 상황 | 트리거 | 시스템 응답 | 사용자 옵션 |
|------|--------|------------|------------|
| **WebSocket 연결 끊김** | 네트워크 불안정 | 재연결 시도 (자동) | 수동 새로고침 |
| **AI 분석 타임아웃** | 10초 초과 | 에러 메시지 표시 | 재시도 / 취소 |
| **PII 마스킹 실패** | 마스킹 오류 | 경고 배지 표시 | 수동 검토 후 진행 |
| **SMS 발송 실패** | 외부 서비스 오류 | 실패 알림 + 재시도 | 재시도 / 나중에 |
| **세션 만료** | JWT 만료 | 재로그인 모달 | 로그인 후 상태 복원 |

---

## 3. 네비게이션 구조 (Navigation Structure)

### 3.1 Global Navigation (Topbar)

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ ┌──────┐                                                                    │
│ │ Logo │   통화 상태 표시      고객 정보 요약           ┌─────┬─────┬─────┐ │
│ └──────┘   [🟢 통화 중 02:34]  홍** | 010-****-5678    │ 📞  │ ⚙️  │ 👤  │ │
│                                                        │이력 │설정 │계정 │ │
│            ◀─── 상태 영역 ───▶  ◀─ 컨텍스트 정보 ─▶    └─────┴─────┴─────┘ │
│                                                        ◀─ 유틸리티 메뉴 ─▶  │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### 3.1.1 Topbar 구성 요소

| 영역 | 요소 | 동작 | 통화 중 가용성 |
|------|------|------|---------------|
| **좌측 - 브랜딩** | 로고 | 클릭 시 대시보드 홈 | ✅ 가용 |
| **중앙 좌측 - 상태** | 통화 상태 인디케이터 | 상태 표시 전용 | ✅ 표시 |
| | 통화 시간 | 실시간 카운터 | ✅ 표시 |
| **중앙 우측 - 컨텍스트** | 고객명 (마스킹) | 표시 전용 | ✅ 표시 |
| | 전화번호 (마스킹) | 표시 전용 | ✅ 표시 |
| **우측 - 유틸리티** | 통화 이력 | 새 탭/페이지 이동 | ⚠️ 제한적 |
| | 설정 | 모달 오픈 | ⚠️ 제한적 |
| | 계정 메뉴 | 드롭다운 | ✅ 가용 |

#### 3.1.2 통화 상태 인디케이터 상태값

| 상태 | 아이콘 | 색상 | 텍스트 |
|------|--------|------|--------|
| 대기 중 | ⚪ | Gray (`#9CA3AF`) | "대기 중" |
| 연결 중 | 🟡 | Yellow (`#F59E0B`) | "연결 중..." |
| 통화 중 | 🟢 | Green (`#10B981`) | "통화 중 MM:SS" |
| 보류 중 | 🟠 | Orange (`#F97316`) | "보류 중" |
| 통화 종료 | 🔵 | Blue (`#3B82F6`) | "마무리 중" |

### 3.2 Local Navigation (Zone 내부)

#### 3.2.1 Zone B 내부 탭 네비게이션

```
┌─────────────────────────────────────────┐
│  [현재 분석]    [히스토리 (3)]           │  ◀─ Tab Navigation
├─────────────────────────────────────────┤
│                                         │
│         탭 콘텐츠 영역                   │
│                                         │
└─────────────────────────────────────────┘
```

| 탭 | 기본 상태 | 배지 | 동작 |
|-----|----------|------|------|
| 현재 분석 | 활성 (기본) | - | 최신 AI 분석 결과 표시 |
| 히스토리 | 비활성 | 분석 횟수 | 세션 내 분석 이력 목록 |

### 3.3 네비게이션 접근성

#### 3.3.1 Desktop 키보드 네비게이션

| 키 조합 | 기능 | 컨텍스트 |
|---------|------|----------|
| `Tab` | 포커스 순방향 이동 | 전역 |
| `Shift + Tab` | 포커스 역방향 이동 | 전역 |
| `Esc` | 모달/드롭다운 닫기 | 모달 열림 시 |
| `Ctrl + Shift + A` | AI 분석 트리거 | 대시보드 |
| `Ctrl + Shift + H` | 통화 이력 열기 | 대시보드 |
| `Space` | Jump to Live | Zone A 포커스 시 |

#### 3.3.2 Focus 순서 (Tab Order)

```
1. Topbar 로고
2. 통화 상태 (읽기 전용)
3. 통화 이력 버튼
4. 설정 버튼
5. 계정 메뉴
6. Zone A 대화 영역
7. Zone A Jump to Live 버튼 (표시 시)
8. Zone B 탭 네비게이션
9. Zone B 콘텐츠 영역
10. AI 분석 FAB 버튼
```

### 3.4 Desktop vs Tablet 네비게이션 차이

| 요소 | Desktop | Tablet |
|------|---------|--------|
| Topbar 레이아웃 | 전체 요소 표시 | 고객 정보 축약 |
| Zone B | 우측 고정 패널 | 슬라이드 오버 패널 |
| Zone B 트리거 | FAB + 단축키 | FAB만 |
| 설정 접근 | Topbar 아이콘 | 햄버거 메뉴 내 |

---

## 4. 페이지 계층 구조 (Page Hierarchy)

### 4.1 계층 다이어그램

```
Root (/)
│
├── /login                          [Depth 1 - 인증]
│   └── 로그인 폼
│
├── /dashboard                      [Depth 1 - 메인 워크스페이스]
│   │
│   ├── Zone A (실시간 대화)         [Depth 2 - 패널]
│   │   ├── 대화 스트림               [Depth 3 - 섹션]
│   │   └── Jump to Live 버튼        [Depth 3 - 컨트롤]
│   │
│   ├── Zone B (AI 인텔리전스)        [Depth 2 - 패널]
│   │   ├── 탭 네비게이션             [Depth 3 - 컨트롤]
│   │   ├── 현재 분석 탭              [Depth 3 - 탭 콘텐츠]
│   │   │   ├── 검색 쿼리 영역        [Depth 4 - 섹션]
│   │   │   ├── 요약 답변             [Depth 4 - 섹션]
│   │   │   ├── 관련 문서             [Depth 4 - 섹션]
│   │   │   └── 추천 스크립트         [Depth 4 - 섹션]
│   │   └── 히스토리 탭               [Depth 3 - 탭 콘텐츠]
│   │       └── 분석 이력 목록        [Depth 4 - 리스트]
│   │
│   ├── Zone C (마무리 모달)          [Depth 2 - 오버레이]
│   │   ├── 보안 배지                 [Depth 3 - 상태 표시]
│   │   ├── 통화 요약 섹션            [Depth 3 - 섹션]
│   │   └── SMS 발송 섹션             [Depth 3 - 섹션]
│   │
│   ├── 설정 모달                     [Depth 2 - 오버레이]
│   │   ├── 개인 설정                 [Depth 3 - 탭]
│   │   ├── 알림 설정                 [Depth 3 - 탭]
│   │   └── 단축키 설정               [Depth 3 - 탭]
│   │
│   └── 도움말 모달                   [Depth 2 - 오버레이]
│       ├── 사용 가이드               [Depth 3 - 섹션]
│       └── FAQ                       [Depth 3 - 섹션]
│
└── /history                        [Depth 1 - 통화 이력]
    ├── 이력 목록                     [Depth 2 - 리스트 뷰]
    │   ├── 필터/검색                 [Depth 3 - 컨트롤]
    │   └── 이력 카드 목록            [Depth 3 - 리스트]
    │
    └── /history/:callId             [Depth 2 - 상세 뷰]
        ├── 통화 메타 정보            [Depth 3 - 섹션]
        ├── 전사본 뷰어               [Depth 3 - 섹션]
        └── 요약/SMS 로그             [Depth 3 - 섹션]
```

### 4.2 계층별 특성

| Depth | 설명 | 예시 | URL 변경 | 히스토리 스택 |
|-------|------|------|----------|--------------|
| **1** | 독립 페이지 | 로그인, 대시보드, 통화 이력 | ✅ 변경 | ✅ 추가 |
| **2** | 패널/오버레이 | Zone A/B/C, 모달 | ❌ 유지 | ❌ 미추가 |
| **3** | 섹션/탭 콘텐츠 | 요약 섹션, 현재 분석 탭 | ❌ 유지 | ❌ 미추가 |
| **4** | 세부 요소 | 검색 쿼리 영역, 문서 링크 | ❌ 유지 | ❌ 미추가 |

### 4.3 상태별 페이지 변형

#### 4.3.1 대시보드 상태 매트릭스

| 상태 | Zone A | Zone B | Zone C | Topbar |
|------|--------|--------|--------|--------|
| **대기** | 빈 상태 메시지 | 축소/숨김 | 숨김 | 대기 상태 표시 |
| **통화 중** | 실시간 스트림 활성 | 확장 가능 | 숨김 | 통화 중 + 타이머 |
| **AI 분석 중** | 스트림 유지 | Skeleton UI | 숨김 | 변동 없음 |
| **마무리** | 스트림 정지 | 비활성화 | 모달 표시 | 마무리 중 표시 |

---

## 5. 콘텐츠 조직화 (Content Organization)

### 5.1 콘텐츠 유형 분류

| 유형 | 특성 | 예시 | 업데이트 빈도 |
|------|------|------|--------------|
| **실시간 스트림** | 지속적 갱신, 자동 | STT 전사 텍스트 | 밀리초 단위 |
| **요청 기반 콘텐츠** | 사용자 트리거 후 갱신 | AI 분석 결과 | 사용자 요청 시 |
| **세션 정적 콘텐츠** | 세션 내 고정 | 고객 정보, 통화 메타 | 통화 시작 시 |
| **생성 콘텐츠** | AI 생성, 사용자 편집 가능 | 통화 요약, SMS | 통화 종료 시 |
| **참조 콘텐츠** | 외부 링크, 읽기 전용 | 정책 문서 링크 | 변동 없음 |

### 5.2 Zone별 콘텐츠 구조

#### 5.2.1 Zone A: 실시간 대화 스트림

```
┌──────────────────────────────────────────────────────────────┐
│  Zone A: 실시간 대화 스트림                                    │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌────────────────────────────────────────────────────────┐  │
│  │  10:32:15  [고객]                                      │  │
│  │  카드 결제가 안 되는데 확인해 주실 수 있나요?            │  │
│  └────────────────────────────────────────────────────────┘  │
│                                                              │
│  ┌────────────────────────────────────────────────────────┐  │
│  │  10:32:22  [상담사]                                    │  │
│  │  네, 고객님. 본인 확인 후 확인해 드리겠습니다.          │  │
│  └────────────────────────────────────────────────────────┘  │
│                                                              │
│  ┌────────────────────────────────────────────────────────┐  │
│  │  10:32:28  [고객]                                      │  │
│  │  제 생년월일은... (interim - 진행 중)                   │◀─ Light Gray
│  └────────────────────────────────────────────────────────┘  │
│                                                              │
│                               ┌──────────────────────────┐   │
│                               │  ▼ 실시간으로 이동        │   │◀─ FAB (조건부)
│                               └──────────────────────────┘   │
└──────────────────────────────────────────────────────────────┘
```

**콘텐츠 단위 구조:**

| 요소 | 필수/선택 | 설명 |
|------|----------|------|
| 타임스탬프 | 필수 | `HH:MM:SS` 형식 |
| 발화자 레이블 | 필수 | `[고객]` 또는 `[상담사]` |
| 발화 텍스트 | 필수 | STT 결과 |
| 상태 표시 | 조건부 | Interim일 경우 스타일 차별화 |

#### 5.2.2 Zone B: AI 인텔리전스 패널

```
┌──────────────────────────────────────────────────────────────┐
│  Zone B: AI 인텔리전스 패널                                    │
├──────────────────────────────────────────────────────────────┤
│  [현재 분석]    [히스토리 (2)]                                │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │  🔍 검색 쿼리                                           │ │
│  │  ┌─────────────────────────────────────────────────┐   │ │
│  │  │ 카드 결제 오류 해결 방법                   [편집] │   │ │
│  │  └─────────────────────────────────────────────────┘   │ │
│  │                                        [다시 분석]     │ │
│  └─────────────────────────────────────────────────────────┘ │
│                                                              │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │  📋 요약 답변                                           │ │
│  │  ─────────────────────────────────────────────────────  │ │
│  │  카드 결제 오류는 다음과 같은 원인이 있을 수 있습니다:   │ │
│  │  1. 한도 초과                                          │ │
│  │  2. 카드 사용 정지 상태                                 │ │
│  │  3. 가맹점 단말기 오류                                  │ │
│  └─────────────────────────────────────────────────────────┘ │
│                                                              │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │  📄 관련 문서                                           │ │
│  │  ─────────────────────────────────────────────────────  │ │
│  │  • 결제 오류 대응 매뉴얼 v3.1              [새 탭 열기] │ │
│  │  • 카드 상태 확인 절차                     [새 탭 열기] │ │
│  └─────────────────────────────────────────────────────────┘ │
│                                                              │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │  💬 추천 응대 스크립트                                  │ │
│  │  ─────────────────────────────────────────────────────  │ │
│  │  "고객님, 불편을 드려 죄송합니다. 먼저 카드 상태를      │ │
│  │   확인해 보겠습니다. 잠시만 기다려 주시겠습니까?"       │ │
│  │                                              [복사]     │ │
│  └─────────────────────────────────────────────────────────┘ │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

**결과 섹션 우선순위:**

| 순서 | 섹션 | 이유 |
|------|------|------|
| 1 | 검색 쿼리 | 상담사가 AI 해석을 먼저 확인/수정 |
| 2 | 요약 답변 | 가장 직접적인 정보 제공 |
| 3 | 관련 문서 | 심화 정보 필요 시 참조 |
| 4 | 추천 스크립트 | 응대 시 바로 활용 가능 |

#### 5.2.3 Zone C: 마무리 모달

```
┌──────────────────────────────────────────────────────────────────┐
│                                                            [X]   │
│                         📞 통화 마무리                           │
│                                                                  │
│  ┌────────────────────────────────────────────────────────────┐  │
│  │  🔒 보안 처리 완료                                         │  │◀─ 보안 배지
│  └────────────────────────────────────────────────────────────┘  │
│                                                                  │
│  ┌────────────────────────────────────────────────────────────┐  │
│  │  📋 통화 요약                                              │  │
│  │  ──────────────────────────────────────────────────────    │  │
│  │  ┌──────────────────────────────────────────────────────┐  │  │
│  │  │ 고객(홍**)의 카드 결제 오류 문의 건.                  │  │  │
│  │  │                                                      │  │  │
│  │  │ - 문의 내용: 오프라인 결제 시 오류 발생              │  │  │
│  │  │ - 확인 결과: 일시적 한도 초과                        │  │  │
│  │  │ - 조치 사항: 임시 한도 상향 처리 완료                │  │  │
│  │  │                                                      │  │  │
│  │  └──────────────────────────────────────────────────────┘  │  │
│  │                                                   [편집]   │  │
│  └────────────────────────────────────────────────────────────┘  │
│                                                                  │
│  ┌────────────────────────────────────────────────────────────┐  │
│  │  📱 SMS 발송                                               │  │
│  │  ──────────────────────────────────────────────────────    │  │
│  │  수신: 010-****-5678                                       │  │
│  │  ┌──────────────────────────────────────────────────────┐  │  │
│  │  │ [OO카드] 홍길동 고객님, 결제 오류 관련 문의가        │  │  │
│  │  │ 정상 처리되었습니다. 임시 한도 상향이 적용되어       │  │  │
│  │  │ 정상 결제 가능합니다. 문의: 1588-XXXX               │  │  │
│  │  └──────────────────────────────────────────────────────┘  │  │
│  │                                                   [편집]   │  │
│  │                                                            │  │
│  │  ☑️ SMS 발송하기                                           │  │
│  └────────────────────────────────────────────────────────────┘  │
│                                                                  │
│  ┌────────────────────────────────────────────────────────────┐  │
│  │         [취소]                        [저장 및 완료]        │  │
│  └────────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────────┘
```

### 5.3 콘텐츠 상태 시각화

| 콘텐츠 상태 | 시각적 처리 | 예시 상황 |
|------------|------------|----------|
| **로딩 중** | Skeleton UI + shimmer | AI 분석 요청 후 |
| **성공** | 콘텐츠 표시 + 성공 Toast | 분석 완료, SMS 발송 |
| **부분 성공** | 콘텐츠 + 경고 인라인 | 일부 문서 검색 실패 |
| **실패** | 에러 메시지 + 재시도 버튼 | 타임아웃, 서버 오류 |
| **비어있음** | Empty State 메시지 | 히스토리 없음 |

### 5.4 외부 링크 정책

| 링크 유형 | 동작 | 대상 |
|----------|------|------|
| **내부 문서** | 새 탭에서 열기 | 정책 매뉴얼, 가이드 |
| **외부 링크** | 새 탭 + 경고 모달 | (원칙적으로 허용 안 함) |
| **다운로드** | 별도 처리 불필요 | (지원 안 함) |

---

## 6. 인터랙션 패턴 (Interaction Patterns)

### 6.1 시스템 주도 vs 사용자 주도 인터랙션

| 구분 | 인터랙션 | 트리거 | 사용자 개입 |
|------|----------|--------|------------|
| **시스템 주도** | STT 스트리밍 | 자동 (통화 연결 시) | 없음 (읽기만) |
| | 통화 종료 감지 | 자동 (상대방 끊음) | 모달 확인 |
| | WebSocket 재연결 | 자동 (연결 끊김) | 없음 |
| **사용자 주도** | AI 분석 요청 | FAB 클릭 / 단축키 | 필수 |
| | 쿼리 수정 후 재분석 | 다시 분석 클릭 | 필수 |
| | SMS 발송 | 발송 버튼 클릭 | 필수 |
| | 요약 편집 | 편집 버튼 클릭 | 선택적 |

### 6.2 핵심 인터랙션 상세

#### 6.2.1 AI 분석 트리거 (FAB)

```
상태 전이도:

    ┌─────────┐      클릭/단축키     ┌─────────┐
    │  Idle   │ ─────────────────▶  │ Loading │
    │ (기본)  │                     │ (분석중) │
    └─────────┘                     └────┬────┘
         ▲                               │
         │                          성공 │ 실패
         │                               │
         │      ┌───────────────────────┴───────────────────────┐
         │      │                                               │
         │      ▼                                               ▼
    ┌─────────────┐                                    ┌─────────────┐
    │   Success   │                                    │    Error    │
    │  (결과표시)  │                                    │  (에러표시)  │
    └──────┬──────┘                                    └──────┬──────┘
           │                                                  │
           │  재분석 클릭                              재시도 클릭
           └─────────────────────┐  ┌─────────────────────────┘
                                 │  │
                                 ▼  ▼
                             ┌─────────┐
                             │ Loading │
                             └─────────┘
```

**FAB 버튼 상태:**

| 상태 | 아이콘 | 레이블 | 색상 | 동작 |
|------|--------|--------|------|------|
| Idle | ✨ | AI 컨텍스트 분석 | Primary Blue | 클릭 가능 |
| Loading | ⏳ (회전) | 분석 중... | Disabled Gray | 클릭 불가 |
| Disabled | ✨ | AI 컨텍스트 분석 | Disabled Gray | 클릭 불가 (대기 상태) |

#### 6.2.2 스크롤 & Jump to Live

```
시나리오: 사용자가 과거 대화를 확인 중

    현재 뷰포트 위치
           │
    ┌──────▼──────────────────────────────────┐
    │  ...과거 대화 내용...                     │
    │                                         │
    │  10:30:15 [고객] 예전에 말씀드렸던...     │
    │                                         │
    └─────────────────────────────────────────┘
                                    │
                                    │ (새 메시지 도착)
                                    ▼
    ┌─────────────────────────────────────────┐
    │  ...과거 대화 내용...                     │
    │                                         │
    │  10:30:15 [고객] 예전에 말씀드렸던...     │
    │                                         │
    │      ┌─────────────────────────┐        │
    │      │ ▼ 실시간으로 이동 (3)   │        │  ◀─ 뱃지: 놓친 메시지 수
    │      └─────────────────────────┘        │
    └─────────────────────────────────────────┘
                     │
                     │ (버튼 클릭)
                     ▼
    ┌─────────────────────────────────────────┐
    │  10:32:45 [고객] 그래서 지금은...        │
    │                                         │
    │  10:32:52 [상담사] 네, 확인해 보니...    │
    │                                         │
    │  10:32:58 [고객] 감사합니다...           │  ◀─ 최신 위치로 스무스 스크롤
    └─────────────────────────────────────────┘
```

#### 6.2.3 마무리 모달 플로우

```
┌─────────────────────────────────────────────────────────────────────┐
│                        마무리 모달 인터랙션                           │
└─────────────────────────────────────────────────────────────────────┘

  [모달 열림]
       │
       ▼
  ┌─────────────┐     자동      ┌─────────────┐
  │ 요약 생성중  │ ───────────▶ │ 요약 표시    │
  │ (Skeleton)  │              │             │
  └─────────────┘              └──────┬──────┘
                                      │
                               ┌──────┴──────┐
                               │             │
                           [편집 클릭]   [편집 안 함]
                               │             │
                               ▼             │
                        ┌─────────────┐      │
                        │ 편집 모드   │      │
                        │ (텍스트에디터)│     │
                        └──────┬──────┘      │
                               │             │
                           [저장]            │
                               │             │
                               └──────┬──────┘
                                      │
                                      ▼
                               ┌─────────────┐
                               │ SMS 섹션    │
                               │ 확인        │
                               └──────┬──────┘
                                      │
                        ┌─────────────┼─────────────┐
                        │             │             │
                    [발송 체크]   [발송 안 함]   [취소]
                        │             │             │
                        ▼             ▼             ▼
                   ┌─────────┐  ┌─────────┐  ┌─────────────┐
                   │ SMS 발송 │  │ 저장만  │  │ 취소 확인   │
                   │ + 저장   │  │         │  │ 모달        │
                   └────┬────┘  └────┬────┘  └──────┬──────┘
                        │            │              │
                        └──────┬─────┘         [확인/취소]
                               │                    │
                               ▼                    │
                        ┌─────────────┐             │
                        │ 완료 Toast  │◀────────────┘
                        │ 모달 닫힘   │      (취소 시 모달 유지)
                        └─────────────┘
```

### 6.3 피드백 패턴

#### 6.3.1 시각적 피드백

| 상황 | 피드백 유형 | 지속 시간 | 위치 |
|------|------------|----------|------|
| 작업 성공 | Toast (초록) | 3초 | 우상단 |
| 작업 실패 | Toast (빨강) + 재시도 | 5초 또는 dismiss | 우상단 |
| 로딩 중 | Skeleton UI | 작업 완료까지 | 해당 영역 |
| 클립보드 복사 | Toast (정보) | 2초 | 우상단 |
| 경고/주의 | Inline Banner (노랑) | dismiss까지 | 해당 영역 상단 |

#### 6.3.2 Toast 메시지 규격

```
┌──────────────────────────────────────┐
│ ✓  AI 분석이 완료되었습니다           │  ◀─ 성공 (Green)
└──────────────────────────────────────┘

┌──────────────────────────────────────┐
│ ✕  분석 요청에 실패했습니다  [재시도] │  ◀─ 실패 (Red)
└──────────────────────────────────────┘

┌──────────────────────────────────────┐
│ 📋  스크립트가 복사되었습니다         │  ◀─ 정보 (Blue)
└──────────────────────────────────────┘
```

### 6.4 Desktop vs Tablet 인터랙션 차이

| 인터랙션 | Desktop | Tablet |
|----------|---------|--------|
| **Zone B 열기** | 항상 표시 / 토글 가능 | 슬라이드 오버로 열림 |
| **Zone B 닫기** | 토글 버튼 | 오버레이 외부 탭 / X 버튼 |
| **AI 분석 트리거** | FAB + `Ctrl+Shift+A` | FAB만 |
| **텍스트 선택** | 마우스 드래그 | 롱프레스 |
| **스크롤** | 마우스휠 / 트랙패드 | 터치 스와이프 |
| **모달 닫기** | `Esc` + X 버튼 | X 버튼 + 외부 탭 |

---

## 7. URL 구조 (URL Structure)

### 7.1 URL 스키마

```
https://{domain}/{path}?{query}#{fragment}

예시:
https://dashboard.company.com/dashboard
https://dashboard.company.com/history?date=2024-01-15&counselor=user123
https://dashboard.company.com/history/call-abc123
```

### 7.2 전체 URL 맵

| 경로 | 메소드 | 설명 | 인증 필요 |
|------|--------|------|----------|
| `/` | GET | 리다이렉트 → `/dashboard` 또는 `/login` | - |
| `/login` | GET | 로그인 페이지 | ❌ |
| `/login` | POST | 로그인 처리 (API) | ❌ |
| `/logout` | POST | 로그아웃 처리 (API) | ✅ |
| `/dashboard` | GET | 메인 대시보드 | ✅ |
| `/history` | GET | 통화 이력 목록 | ✅ |
| `/history/:callId` | GET | 통화 이력 상세 | ✅ |
| `/help` | GET | 도움말 (독립 페이지 옵션) | ✅ |

### 7.3 쿼리 파라미터 규격

#### 7.3.1 `/history` 목록 페이지

| 파라미터 | 타입 | 설명 | 예시 |
|----------|------|------|------|
| `date` | string | 특정 날짜 필터 (YYYY-MM-DD) | `date=2024-01-15` |
| `from` | string | 시작 날짜 | `from=2024-01-01` |
| `to` | string | 종료 날짜 | `to=2024-01-31` |
| `q` | string | 검색어 (고객명, 내용 등) | `q=결제오류` |
| `status` | string | 통화 상태 필터 | `status=completed` |
| `page` | number | 페이지 번호 | `page=2` |
| `limit` | number | 페이지당 항목 수 | `limit=20` |

**예시 URL:**
```
/history?from=2024-01-01&to=2024-01-31&q=카드&page=1&limit=20
```

### 7.4 상태 유지 전략 (State Persistence)

| 상태 유형 | 저장 위치 | URL 반영 | 새로고침 시 |
|----------|----------|----------|------------|
| **현재 페이지** | URL Path | ✅ | 유지 |
| **필터/검색** | URL Query | ✅ | 유지 |
| **Zone B 확장 상태** | Local Storage | ❌ | 복원 |
| **AI 분석 결과** | Session Memory | ❌ | 초기화 |
| **통화 세션** | Server Session | ❌ | 재연결 시도 |
| **사용자 설정** | Local Storage / DB | ❌ | 복원 |

### 7.5 딥링크 지원

| 시나리오 | URL 예시 | 동작 |
|----------|----------|------|
| 특정 통화 이력 공유 | `/history/call-abc123` | 해당 통화 상세 페이지로 이동 |
| 특정 날짜 이력 조회 | `/history?date=2024-01-15` | 필터 적용된 목록 표시 |
| 대시보드 직접 접근 | `/dashboard` | 인증 확인 후 대시보드 표시 |

### 7.6 SEO 고려사항

> **Note:** 본 대시보드는 내부 엔터프라이즈 용도이므로 SEO 우선순위가 낮습니다.

| 설정 | 값 | 이유 |
|------|-----|------|
| `robots.txt` | `Disallow: /` | 검색 엔진 색인 방지 |
| `meta robots` | `noindex, nofollow` | 개별 페이지 색인 방지 |
| Sitemap | 미제공 | 불필요 |
| Canonical URL | 미설정 | 불필요 |

---

## 8. 컴포넌트 계층 구조 (Component Hierarchy)

### 8.1 전체 컴포넌트 트리

```
App
├── AuthProvider                        # 인증 컨텍스트
│   ├── Router
│   │   ├── LoginPage                   # /login
│   │   │   └── LoginForm
│   │   │
│   │   ├── DashboardPage               # /dashboard
│   │   │   ├── DashboardLayout
│   │   │   │   ├── Topbar
│   │   │   │   │   ├── Logo
│   │   │   │   │   ├── CallStatusIndicator
│   │   │   │   │   ├── CustomerInfoBadge
│   │   │   │   │   └── UtilityMenu
│   │   │   │   │       ├── HistoryButton
│   │   │   │   │       ├── SettingsButton
│   │   │   │   │       └── AccountDropdown
│   │   │   │   │
│   │   │   │   ├── MainContent
│   │   │   │   │   ├── ZoneA (ConversationStream)
│   │   │   │   │   │   ├── TranscriptList
│   │   │   │   │   │   │   └── TranscriptItem (반복)
│   │   │   │   │   │   │       ├── Timestamp
│   │   │   │   │   │   │       ├── SpeakerLabel
│   │   │   │   │   │   │       └── TranscriptText
│   │   │   │   │   │   └── JumpToLiveButton (조건부)
│   │   │   │   │   │
│   │   │   │   │   └── ZoneB (AIIntelligencePanel)
│   │   │   │   │       ├── PanelHeader
│   │   │   │   │       │   ├── TabNavigation
│   │   │   │   │       │   └── CollapseToggle
│   │   │   │   │       ├── CurrentAnalysisTab
│   │   │   │   │       │   ├── SearchQuerySection
│   │   │   │   │       │   │   ├── QueryInput
│   │   │   │   │       │   │   └── ReanalyzeButton
│   │   │   │   │       │   ├── SummarySection
│   │   │   │   │       │   ├── RelatedDocsSection
│   │   │   │   │       │   │   └── DocLink (반복)
│   │   │   │   │       │   └── RecommendedScriptSection
│   │   │   │   │       │       ├── ScriptText
│   │   │   │   │       │       └── CopyButton
│   │   │   │   │       ├── HistoryTab
│   │   │   │   │       │   └── AnalysisHistoryList
│   │   │   │   │       │       └── HistoryItem (반복)
│   │   │   │   │       └── SkeletonLoader (조건부)
│   │   │   │   │
│   │   │   │   └── FloatingElements
│   │   │   │       └── AITriggerFAB
│   │   │   │
│   │   │   └── Modals
│   │   │       ├── WrapUpModal (ZoneC)
│   │   │       │   ├── SecurityBadge
│   │   │       │   ├── CallSummarySection
│   │   │       │   │   ├── SummaryEditor
│   │   │       │   │   └── EditButton
│   │   │       │   ├── SMSSection
│   │   │       │   │   ├── RecipientDisplay
│   │   │       │   │   ├── MessageEditor
│   │   │       │   │   └── SendCheckbox
│   │   │       │   └── ActionButtons
│   │   │       │       ├── CancelButton
│   │   │       │       └── ConfirmButton
│   │   │       │
│   │   │       ├── SettingsModal
│   │   │       │   ├── SettingsTabs
│   │   │       │   └── SettingsContent
│   │   │       │
│   │   │       └── HelpModal
│   │   │           ├── GuideSection
│   │   │           └── FAQSection
│   │   │
│   │   └── HistoryPage                 # /history
│   │       ├── HistoryLayout
│   │       │   ├── FilterBar
│   │       │   │   ├── DateRangePicker
│   │       │   │   ├── SearchInput
│   │       │   │   └── StatusFilter
│   │       │   ├── HistoryList
│   │       │   │   └── HistoryCard (반복)
│   │       │   └── Pagination
│   │       │
│   │       └── HistoryDetailPage       # /history/:callId
│   │           ├── CallMetaInfo
│   │           ├── TranscriptViewer
│   │           └── SummaryLogSection
│   │
│   └── GlobalComponents
│       ├── ToastContainer
│       ├── LoadingOverlay
│       └── ErrorBoundary
```

### 8.2 컴포넌트 분류

#### 8.2.1 레이아웃 컴포넌트

| 컴포넌트 | 역할 | 재사용성 |
|----------|------|----------|
| `DashboardLayout` | 대시보드 전체 레이아웃 | 단일 사용 |
| `HistoryLayout` | 이력 페이지 레이아웃 | 단일 사용 |
| `Topbar` | 상단 네비게이션 바 | 공유 (대시보드, 이력) |
| `MainContent` | Zone A + B 컨테이너 | 단일 사용 |

#### 8.2.2 영역 컴포넌트 (Zone)

| 컴포넌트 | 역할 | 상태 관리 |
|----------|------|----------|
| `ZoneA` | 실시간 대화 스트림 | WebSocket 연결, 스크롤 상태 |
| `ZoneB` | AI 인텔리전스 패널 | 분석 결과, 탭 상태, 확장 상태 |
| `WrapUpModal` | 마무리 모달 (Zone C) | 요약/SMS 편집 상태 |

#### 8.2.3 기능 컴포넌트

| 컴포넌트 | 기능 | Props |
|----------|------|-------|
| `TranscriptItem` | 개별 발화 표시 | `speaker`, `text`, `timestamp`, `isFinal` |
| `AITriggerFAB` | AI 분석 트리거 버튼 | `onClick`, `isLoading`, `isDisabled` |
| `SearchQuerySection` | 검색 쿼리 편집 | `query`, `onEdit`, `onReanalyze` |
| `SummaryEditor` | 요약 텍스트 편집 | `content`, `onSave`, `isEditing` |
| `SecurityBadge` | 보안 상태 표시 | `status` |

#### 8.2.4 공통 UI 컴포넌트

| 컴포넌트 | 용도 | 변형(Variants) |
|----------|------|---------------|
| `Button` | 버튼 | `primary`, `secondary`, `danger`, `ghost` |
| `Input` | 텍스트 입력 | `default`, `search`, `textarea` |
| `Modal` | 모달 컨테이너 | `default`, `fullscreen` (tablet) |
| `Toast` | 토스트 알림 | `success`, `error`, `info`, `warning` |
| `Badge` | 상태 배지 | `status`, `count` |
| `Skeleton` | 로딩 스켈레톤 | `text`, `rect`, `circle` |
| `Tabs` | 탭 네비게이션 | - |
| `Dropdown` | 드롭다운 메뉴 | - |

### 8.3 상태 관리 구조

```
┌─────────────────────────────────────────────────────────────────────┐
│                          Global State                               │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐     │
│  │   AuthStore     │  │   CallStore     │  │   UIStore       │     │
│  ├─────────────────┤  ├─────────────────┤  ├─────────────────┤     │
│  │ • user          │  │ • callStatus    │  │ • zoneBExpanded │     │
│  │ • token         │  │ • customerInfo  │  │ • activeModal   │     │
│  │ • isLoggedIn    │  │ • callDuration  │  │ • toasts[]      │     │
│  │                 │  │ • sessionId     │  │ • isLoading     │     │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘     │
│                                                                     │
│  ┌─────────────────┐  ┌─────────────────┐                          │
│  │ TranscriptStore │  │  AIAnalysisStore│                          │
│  ├─────────────────┤  ├─────────────────┤                          │
│  │ • transcripts[] │  │ • currentResult │                          │
│  │ • isStreaming   │  │ • history[]     │                          │
│  │ • scrollPosition│  │ • isLoading     │                          │
│  │                 │  │ • error         │                          │
│  └─────────────────┘  └─────────────────┘                          │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 8.4 데이터 흐름

```
┌─────────────────────────────────────────────────────────────────────┐
│                         데이터 흐름 다이어그램                        │
└─────────────────────────────────────────────────────────────────────┘

  WebSocket Server                REST API Server
        │                               │
        │ STT 스트림                     │ AI 분석 결과
        ▼                               ▼
  ┌─────────────┐                ┌─────────────┐
  │ WebSocket   │                │   HTTP      │
  │ Client      │                │   Client    │
  └──────┬──────┘                └──────┬──────┘
         │                              │
         │                              │
         ▼                              ▼
  ┌─────────────────────────────────────────────┐
  │              Global Store                    │
  │  (Zustand / Redux / Pinia)                  │
  └────────────────────┬────────────────────────┘
                       │
         ┌─────────────┼─────────────┐
         │             │             │
         ▼             ▼             ▼
   ┌──────────┐  ┌──────────┐  ┌──────────┐
   │  ZoneA   │  │  ZoneB   │  │  ZoneC   │
   │Component │  │Component │  │Component │
   └──────────┘  └──────────┘  └──────────┘
         │             │             │
         ▼             ▼             ▼
   ┌─────────────────────────────────────┐
   │              UI Render              │
   └─────────────────────────────────────┘
```

### 8.5 반응형 컴포넌트 전략

| 컴포넌트 | Desktop (≥1024px) | Tablet (768-1023px) |
|----------|-------------------|---------------------|
| `Topbar` | 전체 요소 표시 | 고객정보 축약, 일부 아이콘화 |
| `ZoneA` | 좌측 55% | 전체 폭 |
| `ZoneB` | 우측 45% 고정 | 슬라이드 오버레이 |
| `WrapUpModal` | 중앙 600px 폭 | 전체 화면 |
| `AITriggerFAB` | 우하단 고정 | 우하단 고정 (크기 증가) |

---

## 부록: 용어 정의

| 용어 | 정의 |
|------|------|
| Zone | 대시보드 내 기능별 구분 영역 |
| FAB | Floating Action Button, 플로팅 액션 버튼 |
| STT | Speech-to-Text, 음성-텍스트 변환 |
| RAG | Retrieval-Augmented Generation, 검색 증강 생성 |
| Skeleton UI | 콘텐츠 로딩 중 표시되는 플레이스홀더 UI |
| Toast | 일시적인 알림 메시지 UI |
| Deep Link | 앱/웹 내 특정 위치로 직접 연결되는 URL |

---

**문서 버전:** 1.0  
**최종 수정일:** 2025년 1월  
**작성자:** AI 기반 IA 설계 시스템  
**검토 필요:** UX 디자이너, 프론트엔드 개발 리드, CTO